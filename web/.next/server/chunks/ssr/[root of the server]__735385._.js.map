{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/organiser/web/app/auth.js"],"sourcesContent":["\"use client\";\nimport { CognitoUserPool, CognitoUser, AuthenticationDetails } from 'amazon-cognito-identity-js';\nimport { jwtDecode } from 'jwt-decode';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/router'; \n\nconst poolData = {\n    UserPoolId: 'eu-west-2_Qv91VSnrS',\n    ClientId: '533mf4s6jof94htjam2dut05hd'\n};\n\nconst userPool = new CognitoUserPool(poolData);\n\nexport function signIn(username, password) {\n    const authenticationDetails = new AuthenticationDetails({\n        Username: username,\n        Password: password,\n    });\n\n    const userData = {\n        Username: username,\n        Pool: userPool\n    };\n\n    const cognitoUser = new CognitoUser(userData);\n\n    return new Promise((resolve, reject) => {\n        cognitoUser.authenticateUser(authenticationDetails, {\n            onSuccess: result => {\n                const idToken = result.getIdToken().getJwtToken();\n                sessionStorage.setItem('idToken', idToken);\n                sessionStorage.setItem('name', username);\n                resolve(result);\n            },\n            onFailure: err => reject(err)\n        });\n    });\n}\n\nexport function signOut() {\n    sessionStorage.removeItem('idToken')\n    sessionStorage.removeItem('name');\n    const currentUser = userPool.getCurrentUser();\n    if (currentUser) {\n        currentUser.signOut();\n    }\n}\n\nexport function isSignedIn() {\n    const idToken = sessionStorage.getItem('idToken');\n    if (!idToken) {\n        return false;\n    }\n\n    try {\n        const decoded = jwtDecode(idToken);\n        const currentTime = Math.floor(Date.now() / 1000);\n        return decoded.exp > currentTime;\n    } catch (error) {\n        console.error('Invalid token', error);\n        return false;\n    }\n}\n\nexport function getIdToken() {\n    return sessionStorage.getItem('idToken');\n}\n\nexport function getUsername() {\n    return sessionStorage.getItem('name');\n}\n\nexport default function isAuth(Component) {\n  return function AuthenticatedComponent(props) {\n    const router = useRouter();\n\n    useEffect(() => {\n      if (!isSignedIn()) {\n        // Redirect to login if not authenticated\n        router.push('/login');  \n      }\n    }, [router]);\n\n    // Render nothing until authentication is verified\n    //if (typeof window !== 'undefined' && !localStorage.getItem('authToken')) {\n    //  return null;\n    //}\n\n    // Render the wrapped component when authenticated\n    return <Component {...props} />;\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;AACA;AACA;AAEA;AACA;AAJA;AAAA;AAAA;AADA;;;;;;AAOA,MAAM,WAAW;IACb,YAAY;IACZ,UAAU;AACd;AAEA,MAAM,WAAW,IAAI,0NAAA,CAAA,kBAAe,CAAC;AAE9B,SAAS,OAAO,QAAQ,EAAE,QAAQ;IACrC,MAAM,wBAAwB,IAAI,sOAAA,CAAA,wBAAqB,CAAC;QACpD,UAAU;QACV,UAAU;IACd;IAEA,MAAM,WAAW;QACb,UAAU;QACV,MAAM;IACV;IAEA,MAAM,cAAc,IAAI,kNAAA,CAAA,cAAW,CAAC;IAEpC,OAAO,IAAI,QAAQ,CAAC,SAAS;QACzB,YAAY,gBAAgB,CAAC,uBAAuB;YAChD,WAAW,CAAA;gBACP,MAAM,UAAU,OAAO,UAAU,GAAG,WAAW;gBAC/C,eAAe,OAAO,CAAC,WAAW;gBAClC,eAAe,OAAO,CAAC,QAAQ;gBAC/B,QAAQ;YACZ;YACA,WAAW,CAAA,MAAO,OAAO;QAC7B;IACJ;AACJ;AAEO,SAAS;IACZ,eAAe,UAAU,CAAC;IAC1B,eAAe,UAAU,CAAC;IAC1B,MAAM,cAAc,SAAS,cAAc;IAC3C,IAAI,aAAa;QACb,YAAY,OAAO;IACvB;AACJ;AAEO,SAAS;IACZ,MAAM,UAAU,eAAe,OAAO,CAAC;IACvC,IAAI,CAAC,SAAS;QACV,OAAO;IACX;IAEA,IAAI;QACA,MAAM,UAAU,CAAA,GAAA,sJAAA,CAAA,YAAS,AAAD,EAAE;QAC1B,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;QAC5C,OAAO,QAAQ,GAAG,GAAG;IACzB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO;IACX;AACJ;AAEO,SAAS;IACZ,OAAO,eAAe,OAAO,CAAC;AAClC;AAEO,SAAS;IACZ,OAAO,eAAe,OAAO,CAAC;AAClC;AAEe,SAAS,OAAO,SAAS;IACtC,OAAO,SAAS,uBAAuB,KAAK;QAC1C,MAAM,SAAS,CAAA,GAAA,8HAAA,CAAA,YAAS,AAAD;QAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;YACR,IAAI,CAAC,cAAc;gBACjB,yCAAyC;gBACzC,OAAO,IAAI,CAAC;YACd;QACF,GAAG;YAAC;SAAO;QAEX,kDAAkD;QAClD,4EAA4E;QAC5E,gBAAgB;QAChB,GAAG;QAEH,kDAAkD;QAClD,qBAAO,8OAAC;YAAW,GAAG,KAAK;;;;;;IAC7B;AACF"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/organiser/web/app/layout.js"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport isAuth from \"./auth\";\nimport Link from 'next/link';\n\nfunction DashboardLayout({ children }) {\n  \n  const menuItems = [\n    { name: 'Home', path: '/' },\n    { name: 'Boards', path: '/boards' },\n    { name: 'Tasks', path: '/tasks' },\n  ];\n\n  return (\n    <html lang=\"en\">\n      <body>\n        <header style={{ display: 'flex', justifyContent: 'space-between', padding: '10px', borderBottom: '1px solid #ccc' }}>\n          \n        </header>\n        <main>\n            <div className=\"flex h-screen\">\n              <div className=\"w-1/4 bg-gray-800 text-white p-4\">\n                <h2 className=\"text-xl font-bold mb-4\">Menu</h2>\n                <ul>\n                  {menuItems.map((item) => (\n                    <li key={item.path} className=\"mb-2\">\n                      <Link href={item.path} className=\"block p-2 rounded hover:bg-gray-700\">\n                        {item.name}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n              <div className=\"w-3/4 p-6 overflow-y-auto\">\n                {children}\n              </div>\n            </div>\n        </main>\n      </body>\n    </html>\n  );\n}\n\nexport default isAuth(DashboardLayout);"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,gBAAgB,EAAE,QAAQ,EAAE;IAEnC,MAAM,YAAY;QAChB;YAAE,MAAM;YAAQ,MAAM;QAAI;QAC1B;YAAE,MAAM;YAAU,MAAM;QAAU;QAClC;YAAE,MAAM;YAAS,MAAM;QAAS;KACjC;IAED,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;;8BACC,8OAAC;oBAAO,OAAO;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAiB,SAAS;wBAAQ,cAAc;oBAAiB;;;;;;8BAGnH,8OAAC;8BACG,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAyB;;;;;;kDACvC,8OAAC;kDACE,UAAU,GAAG,CAAC,CAAC,qBACd,8OAAC;gDAAmB,WAAU;0DAC5B,cAAA,8OAAC,4JAAA,CAAA,UAAI;oDAAC,MAAM,KAAK,IAAI;oDAAE,WAAU;8DAC9B,KAAK,IAAI;;;;;;+CAFL,KAAK,IAAI;;;;;;;;;;;;;;;;0CAQxB,8OAAC;gCAAI,WAAU;0CACZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjB;uCAEe,CAAA,GAAA,2GAAA,CAAA,UAAM,AAAD,EAAE"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}